!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=115)}({115:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(28),r=n(116),i=()=>{},s=/\.(\\|\/)/,a=["alert","prompt","NativeGlobal","__devtoolsConfig"],c=["WAServiceGlobal","prompt","id","timing","asLoader","WeixinJSBridge","WeixinJSCore"],l=["setTimeout","clearTimeout","setInterval","clearInterval"];class d extends o.EventEmitter{constructor(e,t,n){super(),this.windowRef=e,this.dashGlobalRef=t,this.documentRef=n,this.appResourceScriptList={},this.canonicalUrlMap={},this.syncLoadedBabelHelpers=new Set,this.batchBabelLoadTaskCount=0,this.verbose=!1,this.affiliatedContextFrames=new Map,this.contextFrameBarriers=new Map,this.contextFrameCreationBarrier=new r.Barrier,this.contextFramesConsoleProtected=new Map,this.isAutoLoad=!1,this.originalLogger=console.log.bind(console),this.originalFunctions=new Map,this.isAutoLoad=e.location.search.includes("autoload")}debugLog(...e){this.verbose&&this.originalLogger("---loader-- (subloader)",...e)}onceActiveAppserviceContextFrameLoadedScripts(e){var t;this.debugLog("subscribed onceActiveAppserviceContextFrameLoadedScripts",null===(t=this.windowRef.location)||void 0===t?void 0:t.href),this.once("loaded-scripts",e)}barrierForContextFrameCreation(){if(!this.isAutoLoad)return this.contextFrameCreationBarrier}releaseContextFrameCreationBarrier(){this.contextFrameCreationBarrier.isOpen()||this.contextFrameCreationBarrier.open()}resolveActiveAppserviceFrame(){return this.resolveActiveFrame("app")}resolveActiveAppserviceFrameSync(){return this.resolveActiveFrameSync("app")}getOrCreateContextFrameBarrier(e){let t=this.contextFrameBarriers.get(e);return t||(t=new r.Barrier,this.contextFrameBarriers.set(e,t)),t}resolveActiveFrame(e){return this.getOrCreateContextFrameBarrier(e).wait().then(()=>this.affiliatedContextFrames.get(e))}resolveActiveFrameSync(e){const t=this.getOrCreateContextFrameBarrier(e);return console.assert(t.isOpen(),e+" iframe should be ready"),this.affiliatedContextFrames.get(e)}setContextFrameReady(e){const t=e.handle.name,n=this.getOrCreateContextFrameBarrier(t);e.ready=!0,n.open()}protectConsole(e,t){if(this.contextFramesConsoleProtected.get(e.id))return;this.debugLog("context frame console protected start");const n=function(e,n){let o=e.create(e.getPrototypeOf(n));const r=e.getOwnPropertyNames(n);for(const t of r)try{const r=e.getOwnPropertyDescriptor(n,t);if(r){const n=new e;e.defineProperty(o,t,e.assign(new e,r,n))}else o[t]=n[t]}catch(t){o=e.assign(e.create(e.getPrototypeOf(n)),n);break}const i=new t.Object;return i.writable=!0,i.configurable=!0,i.value=!0,i.enumerable=!1,e.defineProperty(o,"__protected",i),o}(t.Object,t.console);this.contextFramesConsoleProtected.set(e.id,n),this.debugLog("context frame console protected success")}restoreConsole(e,t){const n=this.contextFramesConsoleProtected.get(e.id);if(n)try{t.console=n,this.debugLog("context frame console restored success")}catch(e){}finally{this.contextFramesConsoleProtected.delete(e.id)}}onDidCreateContextFrame(e,t,n){this.affiliatedContextFrames.set(t,{handle:n,initialScriptFilePath:e,ready:!1})}onWillContextFrameEvaluateScriptFile(e){this.isKindofAppContextFrame(e)&&this.restoreConsole(e,e.iframe.contentWindow)}onDidContextFrameReady(e){const t=this.affiliatedContextFrames.get(e.name);t&&this.setContextFrameReady(t)}onWillContextFrameDestroy(e){this.affiliatedContextFrames.delete(e.name),this.contextFrameBarriers.delete(e.name)}isKindofAppContextFrame(e){return"app"===e.name}onDidContextFramePrepared(e){const t=e.iframe.contentWindow;if(t){t.__wxAppData={},t.__wxRoute=void 0,t.__wxRouteBegin=void 0,t.__wxAppCode__={},t.__wxAppCurrentFile__=void 0,t.__vd_version_info__={},t.Component=function(){},t.Behavior=function(){},t.definePlugin=function(){},t.requirePlugin=function(){},t.global={},t.__workerVendorCode__={},t.__workersCode__={},t.__global.WeixinWorker=t.WeixinWorker={},t.$gwx=void 0,a.forEach(e=>{t[e]=this.windowRef[e]});const e=t.__passWAServiceGlobal__||function(){};t.__global.WAServiceGlobal={},t.__passWAServiceGlobal__=function(n){for(const e in n)"Protect"!==e&&(t.__global.WAServiceGlobal[e]=n[e]);e(n)},t.__global=t.__global||new t.Object,c.forEach(e=>{t.__global[e]=this.dashGlobalRef[e]}),t.__global.asSubLoader=this,t.__global.__consoleDebug=t.console.debug.bind(t.console)}if(this.isKindofAppContextFrame(e)){this.moveContextFrameToFront(e),this.protectConsole(e,e.iframe.contentWindow);const n=t.WeixinJSBridge||new t.Object,o=t.__global.WeixinJSBridge||{},r=Object.keys(o);for(const e of r)n[e]||(n[e]=o[e]);t.WeixinJSBridge=n}}moveContextFrameToFront(e){const t=e.iframe,n=t.getAttribute("style");t.setAttribute("style",["background: transparent",n,"position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none"].filter(e=>Boolean(e)).join(";"))}addOriginalFunctions(e){for(const t of e)this.originalFunctions.set(t,this.windowRef[t])}fixTimerFunctions(e){var t,n;for(const o of e){const e=this.originalFunctions.get(o);if(e===this.windowRef[o]&&"function"==typeof e){this.debugLog("fix timer function",o);try{this.windowRef[o]=e.bind(this.windowRef),Object.defineProperty(this.windowRef[o],"__fixTimerOrigin",{writable:!0,configurable:!0,value:null===(n=null===(t=this.windowRef.location)||void 0===t?void 0:t.href)||void 0===n||n,enumerable:!1})}catch(e){this.debugLog("fixTimerFunctions error",e)}}}}get activeAppWindow(){const e=this.getActiveAppserviceContextFrameSync();return e&&e.iframe.contentWindow||window}get activeAppDocument(){var e;const t=this.getActiveAppserviceContextFrameSync();return t&&(t.iframe.contentDocument||(null===(e=t.iframe.contentWindow)||void 0===e?void 0:e.document))||document}getActiveAppserviceContextFrameSync(){const e=this.affiliatedContextFrames.get("app");if(e)return e.handle}getActiveAppserviceContextFrame(){return this.resolveActiveAppserviceFrame().then(e=>e.handle)}disposeAll(){Array.from(this.affiliatedContextFrames.values()).forEach(e=>e.handle.destroy()),this.dashGlobalRef.WeixinJSContext=null,this.dashGlobalRef.__contextSupport.delegate=null}initWithContexts(){this.isolatedContextEnabled&&(this.dashGlobalRef.__contextSupport.delegate=this,this.addOriginalFunctions(l),this.fixTimerFunctions(l))}get isolatedContextEnabled(){var e;return Boolean(null===(e=this.dashGlobalRef.__contextSupport)||void 0===e?void 0:e.isIsolateContext)}get loadingBabel(){return 0!==this.batchBabelLoadTaskCount}loadAppResourceScripts(e){return this.releaseContextFrameCreationBarrier(),this.loadScripts(e)}loadResourceScripts(e,t){return this.releaseContextFrameCreationBarrier(),this.loadScripts(e,t)}loadScriptContent(e){const t=new __global.XMLHttpRequest;if(t.open("GET",e,!1),t.send(null),200===t.status)return t.responseText;throw new Error("[Context] get script error "+e)}loadBabelModulesSync(e){for(const t of e){const e=t.endsWith(".js")?t:t+".js";if(this.syncLoadedBabelHelpers.has(e))continue;const n=this.resolveAppContextDocumentSync(),o=n.createElement("script");o.async=!1,o.dataset.scriptPath=e,o.type="text/javascript";const r=this.loadScriptContent(e+"?forceSync=true");o.text=r,n.head.appendChild(o),this.syncLoadedBabelHelpers.add(e)}}async loadBabelModules(e){var t;this.batchBabelLoadTaskCount++;try{await this.loadScripts(e.filter(e=>!s.test(e)).map(e=>({src:e.endsWith(".js")?e:e+".js"})))}catch(e){throw e}finally{this.batchBabelLoadTaskCount--,this.batchBabelLoadTaskCount<=0&&(this.debugLog("will dispatch babel load event under",null===(t=this.activeAppWindow.location)||void 0===t?void 0:t.href),this.activeAppWindow.dispatchEvent(new __global.CustomEvent("__babel_module_loaded")))}}resolveAppContextDocument(){return this.isolatedContextEnabled?this.resolveActiveAppserviceFrame().then(e=>{var t;const n=e.handle.iframe;return n.contentDocument||(null===(t=n.contentWindow)||void 0===t?void 0:t.document)}):Promise.resolve(this.documentRef)}resolveAppContextDocumentSync(){var e;if(!this.isolatedContextEnabled)return this.documentRef;const t=this.resolveActiveAppserviceFrameSync().handle.iframe;return t.contentDocument||(null===(e=t.contentWindow)||void 0===e?void 0:e.document)}resolveAppContextWindow(){return this.isolatedContextEnabled?this.resolveActiveAppserviceFrame().then(e=>e.handle.iframe.contentWindow):Promise.resolve(this.windowRef)}async loadScripts(e,t){var n;const o=()=>this.emit("loaded-scripts");if(e){const r=t?t.document:await this.resolveAppContextDocument();this.debugLog("will immediately loadScripts under doc",null===(n=r.location)||void 0===n?void 0:n.href);const i=[],s=r.createElement("script");for(const t of e){if(t.src){s.src=t.src;const e=s.src,n=this.getCanonicalUrl(e);if(this.appResourceScriptList[e]){const n=this.appResourceScriptList[e].onLoad;i.push(n),t.async||await n;continue}const o=this.canonicalUrlMap[n]?this.appResourceScriptList[this.canonicalUrlMap[n]]:null;o&&await o.onLoad,this.canonicalUrlMap[n]=e,this.appResourceScriptList[e]={status:"loading",onLoad:void 0,__resolve:void 0,__reject:void 0,canonicalUrl:n},this.appResourceScriptList[e].onLoad=new Promise((t,n)=>{this.appResourceScriptList[e].__resolve=t,this.appResourceScriptList[e].__reject=n})}const e=r.createElement("script");e.charset="UTF-8";let n,o,a=!0;for(const o in t)if("async"===o)a=!1;else if("loadOptions"===o){const{timing:e}=t.loadOptions;"onMainPkgLoad"===e&&(n=new Promise(e=>{this.once("SUBPACKAGE_READY___APP__",()=>{const t=__global.prompt("CONTINUE_LOAD");e("yes"===t)})}))}else e[o]=t[o];if(e.src){const t=this.appResourceScriptList[e.src];t.startTime=Date.now(),o=new Promise(async o=>{if(e.addEventListener("load",()=>{t.__resolve(),t.status="loaded",t.loadTime=Date.now()-t.startTime,o()}),e.addEventListener("error",e=>{t.__reject(e),t.status="error",t.loadTime=Date.now()-t.startTime,o()}),n){if(!await n)return}r.head.appendChild(e)}),i.push(o)}else n?(o=n.then(t=>{t&&r.head.appendChild(e)}),i.push(o)):r.head.appendChild(e);a&&await o}return Promise.all(i).then(()=>{o()})}return Promise.resolve().then(()=>{o()})}async collectMarkedAppResourceScripts(){const e=[...(await this.resolveAppContextDocument()).head.getElementsByTagName("script")];for(const t of e)t.src&&!this.appResourceScriptList[t.src]&&t.hasAttribute("data-appresource")&&(this.appResourceScriptList[t.src]={status:"loaded",onLoad:Promise.resolve(),__resolve:i,__reject:i,canonicalUrl:this.getCanonicalUrl(t.src)})}getCanonicalUrl(e){return e.replace(/\?.+$/,"")}}t.ASSubLoader=d,window.__global.asSubLoader=new d(window,window.__global,document)},116:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Barrier=class{constructor(){this._isOpen=!1,this._promise=new Promise(e=>{this._completePromise=e})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}},28:function(e,t,n){"use strict";var o=Object.prototype.hasOwnProperty,r="~";function i(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)o.call(e,t)&&n.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},a.prototype.listeners=function(e,t){var n=r?r+e:e,o=this._events[n];if(t)return!!o;if(!o)return[];if(o.fn)return[o.fn];for(var i=0,s=o.length,a=new Array(s);i<s;i++)a[i]=o[i].fn;return a},a.prototype.emit=function(e,t,n,o,i,s){var a=r?r+e:e;if(!this._events[a])return!1;var c,l,d=this._events[a],p=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),p){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,o),!0;case 5:return d.fn.call(d.context,t,n,o,i),!0;case 6:return d.fn.call(d.context,t,n,o,i,s),!0}for(l=1,c=new Array(p-1);l<p;l++)c[l-1]=arguments[l];d.fn.apply(d.context,c)}else{var h,u=d.length;for(l=0;l<u;l++)switch(d[l].once&&this.removeListener(e,d[l].fn,void 0,!0),p){case 1:d[l].fn.call(d[l].context);break;case 2:d[l].fn.call(d[l].context,t);break;case 3:d[l].fn.call(d[l].context,t,n);break;case 4:d[l].fn.call(d[l].context,t,n,o);break;default:if(!c)for(h=1,c=new Array(p-1);h<p;h++)c[h-1]=arguments[h];d[l].fn.apply(d[l].context,c)}}return!0},a.prototype.on=function(e,t,n){var o=new s(t,n||this),i=r?r+e:e;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],o]:this._events[i].push(o):(this._events[i]=o,this._eventsCount++),this},a.prototype.once=function(e,t,n){var o=new s(t,n||this,!0),i=r?r+e:e;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],o]:this._events[i].push(o):(this._events[i]=o,this._eventsCount++),this},a.prototype.removeListener=function(e,t,n,o){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return 0==--this._eventsCount?this._events=new i:delete this._events[s],this;var a=this._events[s];if(a.fn)a.fn!==t||o&&!a.once||n&&a.context!==n||(0==--this._eventsCount?this._events=new i:delete this._events[s]);else{for(var c=0,l=[],d=a.length;c<d;c++)(a[c].fn!==t||o&&!a[c].once||n&&a[c].context!==n)&&l.push(a[c]);l.length?this._events[s]=1===l.length?l[0]:l:0==--this._eventsCount?this._events=new i:delete this._events[s]}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new i:delete this._events[t])):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=r,a.EventEmitter=a,e.exports=a}});